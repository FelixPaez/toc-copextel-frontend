<div class="info-container">
  <!-- Header -->
  <div class="page-header admin-card animate-fade-in">
    <div class="page-left">
      <div class="breadcrumbs">
        <span class="crumb">Nomencladores</span>
        <mat-icon class="crumb-sep">chevron_right</mat-icon>
        <span class="crumb">Información</span>
        <mat-icon class="crumb-sep">chevron_right</mat-icon>
        <span class="crumb">Actualizar Información</span>
      </div>
      <h1 class="page-title">Actualizar Información</h1>
    </div>
    <div class="page-right">
      @if (isEditMode) {
        <button mat-stroked-button (click)="onCancelEdit()" class="cancel-btn">
          <mat-icon>close</mat-icon>
          Cancelar
        </button>
      }
      <button mat-raised-button class="btn-danger" (click)="onUpdateAll()">
        <mat-icon>{{ isEditMode ? 'save' : 'edit' }}</mat-icon>
        {{ isEditMode ? 'Guardar' : 'Actualizar' }}
      </button>
    </div>
  </div>

  <!-- Información del Pie de Página -->
  <mat-card class="info-section-card admin-card animate-fade-in hover-raise">
    <mat-expansion-panel 
      [expanded]="footerExpanded"
      (opened)="footerExpanded = true"
      (closed)="footerExpanded = false">
      
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3 class="section-title">Información del Pie de Página</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="form-content">
        <form [formGroup]="footerInfoForm" class="footer-form">
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Dirección *</mat-label>
              <input matInput formControlName="address" placeholder="Ingresa la dirección">
              @if (footerInfoForm.get('address')?.hasError('required') && footerInfoForm.get('address')?.touched) {
                <mat-error>La dirección es requerida</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Correo electrónico *</mat-label>
              <input matInput type="email" formControlName="email" placeholder="correo@ejemplo.com">
              @if (footerInfoForm.get('email')?.hasError('required') && footerInfoForm.get('email')?.touched) {
                <mat-error>El correo es requerido</mat-error>
              }
              @if (footerInfoForm.get('email')?.hasError('email') && footerInfoForm.get('email')?.touched) {
                <mat-error>Ingresa un correo válido</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Teléfono *</mat-label>
              <input matInput formControlName="phone" placeholder="+1234567890">
              @if (footerInfoForm.get('phone')?.hasError('required') && footerInfoForm.get('phone')?.touched) {
                <mat-error>El teléfono es requerido</mat-error>
              }
            </mat-form-field>
          </div>

        </form>
      </div>
    </mat-expansion-panel>
  </mat-card>

  <!-- Protección al Consumidor -->
  <mat-card class="info-section-card admin-card animate-fade-in hover-raise">
    <mat-expansion-panel 
      [expanded]="consumerProtectionExpanded"
      (opened)="consumerProtectionExpanded = true"
      (closed)="consumerProtectionExpanded = false">
      
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3 class="section-title">Protección al consumidor</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="form-content">
        <form [formGroup]="consumerProtectionForm" class="description-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descripción *</mat-label>
            <textarea matInput formControlName="description" rows="8" placeholder="Ingresa la descripción de protección al consumidor"></textarea>
            @if (consumerProtectionForm.get('description')?.hasError('required') && consumerProtectionForm.get('description')?.touched) {
              <mat-error>La descripción es requerida</mat-error>
            }
          </mat-form-field>

        </form>
      </div>
    </mat-expansion-panel>
  </mat-card>

  <!-- Términos y Condiciones -->
  <mat-card class="info-section-card admin-card animate-fade-in hover-raise">
    <mat-expansion-panel 
      [expanded]="termsConditionsExpanded"
      (opened)="termsConditionsExpanded = true"
      (closed)="termsConditionsExpanded = false">
      
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3 class="section-title">Términos y condiciones</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="form-content">
        <form [formGroup]="termsConditionsForm" class="description-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descripción *</mat-label>
            <textarea matInput formControlName="description" rows="8" placeholder="Ingresa los términos y condiciones"></textarea>
            @if (termsConditionsForm.get('description')?.hasError('required') && termsConditionsForm.get('description')?.touched) {
              <mat-error>La descripción es requerida</mat-error>
            }
          </mat-form-field>

        </form>
      </div>
    </mat-expansion-panel>
  </mat-card>

  <!-- Redes Sociales -->
  <mat-card class="info-section-card admin-card animate-fade-in hover-raise">
    <mat-expansion-panel 
      [expanded]="socialNetworksExpanded"
      (opened)="socialNetworksExpanded = true"
      (closed)="socialNetworksExpanded = false">
      
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3 class="section-title">Redes sociales</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="table-content">
        <table mat-table [dataSource]="socialNetworks" class="social-networks-table admin-table">
          
          <!-- Nombre Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Nombre</th>
            <td mat-cell *matCellDef="let socialNetwork" class="social-name">{{ socialNetwork.name }}</td>
          </ng-container>

          <!-- Enlace Column -->
          <ng-container matColumnDef="url">
            <th mat-header-cell *matHeaderCellDef>Enlace</th>
            <td mat-cell *matCellDef="let socialNetwork" class="social-url">{{ socialNetwork.url }}</td>
          </ng-container>

          <!-- Acciones Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let socialNetwork" class="actions-cell">
              <button mat-icon-button class="action-btn" aria-label="Editar" (click)="onEditSocialNetwork(socialNetwork)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button class="action-btn warn" aria-label="Eliminar" (click)="onDeleteSocialNetwork(socialNetwork)">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <div class="section-actions">
          <button mat-raised-button class="btn-danger" (click)="onAddSocialNetwork()">
            <mat-icon>add</mat-icon>
            Nueva
          </button>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-card>
</div>
