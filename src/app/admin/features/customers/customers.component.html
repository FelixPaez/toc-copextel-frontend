<div class="customers-container">
  <!-- Header -->
  <div class="customers-header">
    <div class="header-content">
      <h1>Gestión de Clientes</h1>
      <p>Administra la base de datos de clientes de tu tienda</p>
    </div>
    <button mat-raised-button color="primary" class="add-button">
      <mat-icon>person_add</mat-icon>
      Nuevo Cliente
    </button>
  </div>

  <!-- Estadísticas Rápidas -->
  <div class="stats-grid">
    <mat-card class="stat-card admin-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">people</mat-icon>
          <div class="stat-info">
            <h3>Total Clientes</h3>
            <p class="stat-value">1,234</p>
            <span class="stat-change positive">+8.5%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card admin-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">star</mat-icon>
          <div class="stat-info">
            <h3>Clientes VIP</h3>
            <p class="stat-value">89</p>
            <span class="stat-change positive">+12.3%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card admin-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">trending_up</mat-icon>
          <div class="stat-info">
            <h3>Nuevos Este Mes</h3>
            <p class="stat-value">156</p>
            <span class="stat-change positive">+15.7%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card admin-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">person_off</mat-icon>
          <div class="stat-info">
            <h3>Inactivos</h3>
            <p class="stat-value">45</p>
            <span class="stat-change negative">-2.1%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Filtros y Búsqueda -->
  <mat-card class="filters-card admin-card animate-fade-in hover-raise">
    <mat-card-content>
      <div class="filters-content">
        <div class="search-section">
          <mat-icon class="search-icon">search</mat-icon>
          <input 
            type="text" 
            placeholder="Buscar clientes..." 
            class="search-input">
        </div>
        <div class="filter-buttons">
          <button mat-stroked-button>
            <mat-icon>filter_list</mat-icon>
            Filtros
          </button>
          <button mat-stroked-button>
            <mat-icon>sort</mat-icon>
            Ordenar
          </button>
          <button mat-stroked-button>
            <mat-icon>download</mat-icon>
            Exportar
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Tabla de Clientes -->
  <mat-card class="customers-table-card admin-card animate-fade-in hover-raise">
    <mat-card-content>
      <table mat-table [dataSource]="customers" class="customers-table admin-table">
        
        <!-- Avatar Column -->
        <ng-container matColumnDef="avatar">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let customer">
            <div class="admin-avatar avatar-sm customer-avatar">
              @if (customer.avatar) {
                <img [src]="customer.avatar" [alt]="customer.name" (error)="customer.avatar = null">
              } @else {
                <span class="avatar-initials">{{getInitials(customer.name)}}</span>
              }
            </div>
          </td>
        </ng-container>

        <!-- Nombre Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Cliente</th>
          <td mat-cell *matCellDef="let customer">
            <div class="customer-info">
              <h4>{{customer.name}}</h4>
              <p>ID: {{customer.id}}</p>
            </div>
          </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef>Email</th>
          <td mat-cell *matCellDef="let customer">
            <span class="customer-email">{{customer.email}}</span>
          </td>
        </ng-container>

        <!-- Teléfono Column -->
        <ng-container matColumnDef="phone">
          <th mat-header-cell *matHeaderCellDef>Teléfono</th>
          <td mat-cell *matCellDef="let customer">
            <span class="customer-phone">{{customer.phone}}</span>
          </td>
        </ng-container>

        <!-- Fecha de Registro Column -->
        <ng-container matColumnDef="joinDate">
          <th mat-header-cell *matHeaderCellDef>Fecha Registro</th>
          <td mat-cell *matCellDef="let customer">
            <span class="join-date">{{customer.joinDate | date:'dd/MM/yyyy'}}</span>
          </td>
        </ng-container>

        <!-- Pedidos Column -->
        <ng-container matColumnDef="orders">
          <th mat-header-cell *matHeaderCellDef>Pedidos</th>
          <td mat-cell *matCellDef="let customer">
            <span class="orders-count">{{customer.orders}}</span>
          </td>
        </ng-container>

        <!-- Total Gastado Column -->
        <ng-container matColumnDef="totalSpent">
          <th mat-header-cell *matHeaderCellDef>Total Gastado</th>
          <td mat-cell *matCellDef="let customer">
            <span class="total-spent">${{customer.totalSpent}}</span>
          </td>
        </ng-container>

        <!-- Estado Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Estado</th>
          <td mat-cell *matCellDef="let customer">
            <mat-chip [color]="getStatusColor(customer.status)" selected>
              {{customer.status}}
            </mat-chip>
          </td>
        </ng-container>

        <!-- Acciones Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let customer">
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="onView(customer)">
                <mat-icon>visibility</mat-icon>
                <span>Ver Perfil</span>
              </button>
              <button mat-menu-item (click)="onEdit(customer)">
                <mat-icon>edit</mat-icon>
                <span>Editar</span>
              </button>
              <button mat-menu-item (click)="onContact(customer)">
                <mat-icon>email</mat-icon>
                <span>Contactar</span>
              </button>
              <button mat-menu-item (click)="onDelete(customer)">
                <mat-icon>delete</mat-icon>
                <span>Eliminar</span>
              </button>
            </mat-menu>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <!-- Paginación -->
      <mat-paginator 
        [pageSizeOptions]="[5, 10, 25, 50]"
        showFirstLastButtons
        aria-label="Seleccionar página de clientes">
      </mat-paginator>
    </mat-card-content>
  </mat-card>
</div>
