<div class="slide-form-dialog">
  <h2 mat-dialog-title class="dialog-title">{{ title }}</h2>
  
  <mat-dialog-content class="dialog-content">
    <form [formGroup]="slideForm" class="slide-form">
      
      <!-- Campo Título -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Título</mat-label>
        <input matInput formControlName="title" placeholder="Ingresa el título de la diapositiva">
        @if (slideForm.get('title')?.hasError && slideForm.get('title')?.touched) {
          <mat-error>El título es requerido (mínimo 2 caracteres)</mat-error>
        }
      </mat-form-field>

      <!-- Campo Subtítulo -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Subtítulo</mat-label>
        <textarea matInput formControlName="subtitle" placeholder="Ingresa el subtítulo de la diapositiva" rows="3"></textarea>
        @if (slideForm.get('subtitle')?.hasError && slideForm.get('subtitle')?.touched) {
          <mat-error>El subtítulo es requerido (mínimo 2 caracteres)</mat-error>
        }
      </mat-form-field>

      <!-- Sección de Imagen -->
      <div class="image-upload-section">
        <label class="upload-label">Imagen de la diapositiva</label>
        <div 
          class="image-upload-area"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
          [class.has-image]="slideForm.get('imageUrl')?.value">
          
          @if (slideForm.get('imageUrl')?.value) {
            <div class="image-preview">
              <img [src]="slideForm.get('imageUrl')?.value" alt="Preview" class="preview-img">
              <div class="image-overlay">
                <button type="button" mat-icon-button class="remove-btn" (click)="onImageDelete()">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>
          } @else {
            <div class="upload-placeholder">
              <mat-icon class="upload-icon">photo_camera</mat-icon>
              <p class="upload-text">Arrastra una imagen aquí o haz clic para seleccionar</p>
              <input 
                type="file" 
                accept="image/*" 
                (change)="onImageUpload($event)"
                class="file-input"
                #fileInput>
              <button type="button" mat-raised-button (click)="fileInput.click()" class="select-btn">
                Seleccionar Archivo
              </button>
            </div>
          }
        </div>
      </div>

      <!-- Toggle Estado -->
      <div class="status-section">
        <label class="status-label">Estado</label>
        <mat-slide-toggle formControlName="active" color="primary">
          Activo
        </mat-slide-toggle>
      </div>

    </form>
  </mat-dialog-content>

  <div class="actions-footer">
    <button mat-stroked-button type="button" (click)="onCancel()">
      <mat-icon>arrow_back</mat-icon>
      Cancelar
    </button>
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="slideForm.invalid || isUploading"
      (click)="onSubmit()">
      <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
      {{ submitText }}
    </button>
  </div>
</div>
