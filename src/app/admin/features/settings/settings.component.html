<div class="settings-container">
  <!-- Header -->
  <div class="settings-header">
    <div class="header-content">
      <h1>Configuración del Sistema</h1>
      <p>Gestiona las configuraciones de tu tienda online</p>
    </div>
    <div class="header-actions">
      <button mat-stroked-button (click)="onResetSettings()">
        <mat-icon>refresh</mat-icon>
        Restablecer
      </button>
      <button mat-stroked-button (click)="onExportSettings()">
        <mat-icon>download</mat-icon>
        Exportar
      </button>
      <button mat-raised-button color="primary" (click)="onImportSettings()">
        <mat-icon>upload</mat-icon>
        Importar
      </button>
    </div>
  </div>

  <!-- Tabs de Configuración -->
  <mat-card class="settings-tabs-card admin-card">
    <mat-card-content>
      <mat-tab-group>
        <!-- Tab General -->
        <mat-tab label="General">
          <div class="tab-content">
            <mat-card class="settings-form-card admin-card">
              <mat-card-header>
                <mat-card-title>Información de la Tienda</mat-card-title>
                <mat-card-subtitle>Configura los datos básicos de tu tienda</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <form [formGroup]="generalForm" class="settings-form">
                  <div class="form-row">
                    <mat-form-field appearance="outline">
                      <mat-label>Nombre de la Tienda</mat-label>
                      <input matInput formControlName="name" placeholder="Mi Tienda Online">
                      @if (generalForm.get('name')?.hasError('required')) { <mat-error>El nombre es requerido</mat-error> }
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                      <mat-label>Email de Contacto</mat-label>
                      <input matInput formControlName="email" type="email" placeholder="admin@mitienda.com">
                      @if (generalForm.get('email')?.hasError('required')) { <mat-error>El email es requerido</mat-error> }
                      @if (generalForm.get('email')?.hasError('email')) { <mat-error>Ingrese un email válido</mat-error> }
                    </mat-form-field>
                  </div>

                  <div class="form-row">
                    <mat-form-field appearance="outline">
                      <mat-label>Teléfono</mat-label>
                      <input matInput formControlName="phone" placeholder="+34 612 345 678">
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                      <mat-label>Dirección</mat-label>
                      <input matInput formControlName="address" placeholder="Calle Principal 123, Madrid">
                    </mat-form-field>
                  </div>

                  <div class="form-row">
                    <mat-form-field appearance="outline">
                      <mat-label>Moneda</mat-label>
                      <mat-select formControlName="currency">
                        <mat-option value="EUR">Euro (EUR)</mat-option>
                        <mat-option value="USD">Dólar (USD)</mat-option>
                        <mat-option value="GBP">Libra (GBP)</mat-option>
                      </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                      <mat-label>Idioma</mat-label>
                      <mat-select formControlName="language">
                        <mat-option value="es">Español</mat-option>
                        <mat-option value="en">English</mat-option>
                        <mat-option value="fr">Français</mat-option>
                      </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                      <mat-label>Zona Horaria</mat-label>
                      <mat-select formControlName="timezone">
                        <mat-option value="Europe/Madrid">Europe/Madrid</mat-option>
                        <mat-option value="America/New_York">America/New_York</mat-option>
                        <mat-option value="Asia/Tokyo">Asia/Tokyo</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="form-actions">
                    <button mat-raised-button color="primary" (click)="onSaveGeneral()" [disabled]="generalForm.invalid">
                      <mat-icon>save</mat-icon>
                      Guardar Cambios
                    </button>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </mat-tab>

        <!-- Tab Notificaciones -->
        <mat-tab label="Notificaciones">
          <div class="tab-content">
            <mat-card class="settings-form-card admin-card">
              <mat-card-header>
                <mat-card-title>Configuración de Notificaciones</mat-card-title>
                <mat-card-subtitle>Gestiona las notificaciones del sistema</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <form [formGroup]="notificationsForm" class="settings-form">
                  <div class="toggle-settings">
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Notificaciones por Email</h4>
                        <p>Recibe notificaciones importantes por correo electrónico</p>
                      </div>
                      <mat-slide-toggle formControlName="emailNotifications"></mat-slide-toggle>
                    </div>

                    <mat-divider></mat-divider>

                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Notificaciones de Pedidos</h4>
                        <p>Recibe alertas cuando se realicen nuevos pedidos</p>
                      </div>
                      <mat-slide-toggle formControlName="orderNotifications"></mat-slide-toggle>
                    </div>

                    <mat-divider></mat-divider>

                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Alertas de Stock</h4>
                        <p>Notificaciones cuando el stock esté bajo</p>
                      </div>
                      <mat-slide-toggle formControlName="stockAlerts"></mat-slide-toggle>
                    </div>

                    <mat-divider></mat-divider>

                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Emails de Marketing</h4>
                        <p>Recibe promociones y ofertas especiales</p>
                      </div>
                      <mat-slide-toggle formControlName="marketingEmails"></mat-slide-toggle>
                    </div>

                    <mat-divider></mat-divider>

                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Reportes Semanales</h4>
                        <p>Recibe un resumen semanal de ventas y métricas</p>
                      </div>
                      <mat-slide-toggle formControlName="weeklyReports"></mat-slide-toggle>
                    </div>
                  </div>

                  <div class="form-actions">
                    <button mat-raised-button color="primary" (click)="onSaveNotifications()">
                      <mat-icon>save</mat-icon>
                      Guardar Cambios
                    </button>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </mat-tab>

        <!-- Tab Seguridad -->
        <mat-tab label="Seguridad">
          <div class="tab-content">
            <mat-card class="settings-form-card admin-card">
              <mat-card-header>
                <mat-card-title>Configuración de Seguridad</mat-card-title>
                <mat-card-subtitle>Gestiona la seguridad de tu cuenta</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <form [formGroup]="securityForm" class="settings-form">
                  <div class="toggle-settings">
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <h4>Autenticación de Dos Factores</h4>
                        <p>Añade una capa extra de seguridad a tu cuenta</p>
                      </div>
                      <mat-slide-toggle formControlName="twoFactorAuth"></mat-slide-toggle>
                    </div>

                    <mat-divider></mat-divider>

                    <div class="form-row">
                      <mat-form-field appearance="outline">
                        <mat-label>Tiempo de Sesión (minutos)</mat-label>
                        <input matInput formControlName="sessionTimeout" type="number" min="5" max="120">
                        <mat-hint>Tiempo antes de que la sesión expire automáticamente</mat-hint>
                      </mat-form-field>

                      <mat-form-field appearance="outline">
                        <mat-label>Expiración de Contraseña (días)</mat-label>
                        <input matInput formControlName="passwordExpiry" type="number" min="30" max="365">
                        <mat-hint>Días antes de que la contraseña expire</mat-hint>
                      </mat-form-field>

                      <mat-form-field appearance="outline">
                        <mat-label>Intentos de Login</mat-label>
                        <input matInput formControlName="loginAttempts" type="number" min="3" max="10">
                        <mat-hint>Número máximo de intentos antes del bloqueo</mat-hint>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="form-actions">
                    <button mat-raised-button color="primary" (click)="onSaveSecurity()">
                      <mat-icon>save</mat-icon>
                      Guardar Cambios
                    </button>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
  </mat-card>
</div>
